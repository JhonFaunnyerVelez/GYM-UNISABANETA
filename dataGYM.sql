-- MySQL Script generated by MySQL Workbench
-- Sat Apr 29 16:34:21 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema GYM_UNISABANETA
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema GYM_UNISABANETA
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `GYM_UNISABANETA` DEFAULT CHARACTER SET utf8 ;
USE `GYM_UNISABANETA` ;

-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_TIPO_USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_TIPO_USUARIO` (
  `idTIPO_USUARIO` INT NOT NULL AUTO_INCREMENT,
  `DSDESCRIPCION` VARCHAR(45) NULL,
  PRIMARY KEY (`idTIPO_USUARIO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_INSTRUCTOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_INSTRUCTOR` (
  `idTB_INSTRUCTOR` INT NOT NULL AUTO_INCREMENT,
  `DSNOMBRE` VARCHAR(45) NULL,
  `DSPRIMERAPELLIDO` VARCHAR(45) NULL,
  `DSSEGUNDOAPELLIDO` VARCHAR(45) NULL,
  `NMTELEFONO` INT NULL,
  `DSDIRECCION` VARCHAR(45) NULL,
  `NMDOCUMENTO` INT NOT NULL,
  `DSCORREO` VARCHAR(45) NULL,
  `FEFECHANACIMIENTO` TIMESTAMP NULL,
  `FEREGISTRO` TIMESTAMP NULL,
  PRIMARY KEY (`idTB_INSTRUCTOR`),
  UNIQUE INDEX `NMDOCUMENTO_UNIQUE` (`NMDOCUMENTO` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_USUARIO` (
  `idTB_USUARIO` INT NOT NULL AUTO_INCREMENT,
  `DSNOMBRE` VARCHAR(45) NOT NULL,
  `DSPRIMERAPELLIDO` VARCHAR(45) NOT NULL,
  `DSSEGUNDOAPELLIDO` VARCHAR(45) NULL,
  `NMAUTORIZADO` INT NOT NULL,
  `DSCORREO` VARCHAR(45) NOT NULL,
  `FEFECHANACIMIENTO` TIMESTAMP NOT NULL,
  `NMDOCUMENTO` INT NOT NULL,
  `DSCONTRASEÃ‘A` VARCHAR(45) NULL,
  `DSTELEFONO` VARCHAR(45) NULL,
  `DSDIRECCION` VARCHAR(45) NULL,
  `DSSEXO` VARCHAR(45) NULL,
  `DSOCUPACION` VARCHAR(45) NULL,
  `FEREGISTRO` VARCHAR(45) NULL,
  `TIPO_USUARIO_idTIPO_USUARIO` INT NOT NULL,
  `TB_INSTRUCTOR_idTB_INSTRUCTOR` INT NOT NULL,
  PRIMARY KEY (`idTB_USUARIO`),
  INDEX `fk_TB_USUARIO_TIPO_USUARIO_idx` (`TIPO_USUARIO_idTIPO_USUARIO` ASC),
  UNIQUE INDEX `NMDOCUMENTO_UNIQUE` (`NMDOCUMENTO` ASC),
  INDEX `fk_TB_USUARIO_TB_INSTRUCTOR1_idx` (`TB_INSTRUCTOR_idTB_INSTRUCTOR` ASC),
  CONSTRAINT `fk_TB_USUARIO_TIPO_USUARIO`
    FOREIGN KEY (`TIPO_USUARIO_idTIPO_USUARIO`)
    REFERENCES `GYM_UNISABANETA`.`TB_TIPO_USUARIO` (`idTIPO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TB_USUARIO_TB_INSTRUCTOR1`
    FOREIGN KEY (`TB_INSTRUCTOR_idTB_INSTRUCTOR`)
    REFERENCES `GYM_UNISABANETA`.`TB_INSTRUCTOR` (`idTB_INSTRUCTOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_FECHA_ENVIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_FECHA_ENVIO` (
  `idTB_FECHA_ENVIO` INT NOT NULL AUTO_INCREMENT,
  `FEFECHAENVIO` TIMESTAMP NULL,
  PRIMARY KEY (`idTB_FECHA_ENVIO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_TIPO_CONTRATO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_TIPO_CONTRATO` (
  `idTB_TIPO_CONTRATO` INT NOT NULL AUTO_INCREMENT,
  `DSDESCRIPCION` VARCHAR(45) NULL,
  `NMPRECIO` INT NULL,
  `FEREGISTRO` TIMESTAMP NULL,
  PRIMARY KEY (`idTB_TIPO_CONTRATO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_ESTADO_PAGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_ESTADO_PAGO` (
  `idTB_ESTADO_PAGO` INT NOT NULL AUTO_INCREMENT,
  `DSTIPOPAGO` VARCHAR(45) NULL,
  `NMACTIVO` INT NULL,
  `TB_TIPO_CONTRATO_idTB_TIPO_CONTRATO` INT NOT NULL,
  `TB_USUARIO_idTB_USUARIO` INT NOT NULL,
  PRIMARY KEY (`idTB_ESTADO_PAGO`),
  INDEX `fk_TB_ESTADO_PAGO_TB_TIPO_CONTRATO1_idx` (`TB_TIPO_CONTRATO_idTB_TIPO_CONTRATO` ASC),
  INDEX `fk_TB_ESTADO_PAGO_TB_USUARIO1_idx` (`TB_USUARIO_idTB_USUARIO` ASC),
  CONSTRAINT `fk_TB_ESTADO_PAGO_TB_TIPO_CONTRATO1`
    FOREIGN KEY (`TB_TIPO_CONTRATO_idTB_TIPO_CONTRATO`)
    REFERENCES `GYM_UNISABANETA`.`TB_TIPO_CONTRATO` (`idTB_TIPO_CONTRATO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TB_ESTADO_PAGO_TB_USUARIO1`
    FOREIGN KEY (`TB_USUARIO_idTB_USUARIO`)
    REFERENCES `GYM_UNISABANETA`.`TB_USUARIO` (`idTB_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_RUTINAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_RUTINAS` (
  `idTB_RUTINAS` INT NOT NULL AUTO_INCREMENT,
  `DSNOMBRERUTINA` VARCHAR(45) NULL,
  `DSDESCRIPCION` VARCHAR(45) NULL,
  `FEFECHAINICIAL` TIMESTAMP NULL,
  `FEFECHAFINAL` TIMESTAMP NULL,
  `TB_USUARIO_idTB_USUARIO` INT NOT NULL,
  `FEREGISTRO` TIMESTAMP NULL,
  PRIMARY KEY (`idTB_RUTINAS`),
  INDEX `fk_TB_RUTINAS_TB_USUARIO1_idx` (`TB_USUARIO_idTB_USUARIO` ASC),
  CONSTRAINT `fk_TB_RUTINAS_TB_USUARIO1`
    FOREIGN KEY (`TB_USUARIO_idTB_USUARIO`)
    REFERENCES `GYM_UNISABANETA`.`TB_USUARIO` (`idTB_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_SERVICIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_SERVICIO` (
  `idTB_SERVICIO` INT NOT NULL AUTO_INCREMENT,
  `DSNOMBRE` VARCHAR(45) NULL,
  `DSDESCRIPCION` VARCHAR(45) NULL,
  `NMCUPOLIMITE` VARCHAR(45) NULL,
  `FEREGISTRO` TIMESTAMP NULL,
  PRIMARY KEY (`idTB_SERVICIO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `GYM_UNISABANETA`.`TB_RUTINAS_X_TB_SERVICIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `GYM_UNISABANETA`.`TB_RUTINAS_X_TB_SERVICIO` (
  `TB_RUTINAS_idTB_RUTINAS` INT NOT NULL,
  `TB_SERVICIO_idTB_SERVICIO` INT NOT NULL,
  `FEREGISTRO` TIMESTAMP NULL,
  PRIMARY KEY (`TB_RUTINAS_idTB_RUTINAS`, `TB_SERVICIO_idTB_SERVICIO`),
  INDEX `fk_TB_RUTINAS_has_TB_SERVICIO_TB_SERVICIO1_idx` (`TB_SERVICIO_idTB_SERVICIO` ASC),
  INDEX `fk_TB_RUTINAS_has_TB_SERVICIO_TB_RUTINAS1_idx` (`TB_RUTINAS_idTB_RUTINAS` ASC),
  CONSTRAINT `fk_TB_RUTINAS_has_TB_SERVICIO_TB_RUTINAS1`
    FOREIGN KEY (`TB_RUTINAS_idTB_RUTINAS`)
    REFERENCES `GYM_UNISABANETA`.`TB_RUTINAS` (`idTB_RUTINAS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TB_RUTINAS_has_TB_SERVICIO_TB_SERVICIO1`
    FOREIGN KEY (`TB_SERVICIO_idTB_SERVICIO`)
    REFERENCES `GYM_UNISABANETA`.`TB_SERVICIO` (`idTB_SERVICIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
